## Week 26

#### General

- [x] Update weekly schedule
- [x] Make document for Ben

- [x] Confirm with Johnwin about Friday (Kobie clash)
- [x] ESL hoodie

#### Practical

- [ ] Car safety ("Roll Cage")
	- [ ] Body safe
	- [ ] LiDAR safe
	- [ ] Implement Camera mount
- [x] Try to get the mini-voyager moving
- [ ] Implement batteries on baby-voyager 
- [ ] Make a box for the baby-voyager

- [x] Check the drivetrain of the F1Tenth car
#### Simulator

- [ ] Simulate the $\omega_{wheel}$, $\dot{v}_{car}$, and $\psi_{car}$ sense
	- [ ] Test algorithm
#### Research Eng

- [ ] Look at Auto-rally
- [ ] Look at Audi AWD TC
- [ ] Compare the 2 and find out how to detect slipping that way
	- [ ] Look at car velocity sensing
	- [ ] Look at wheel velocity sensor
- [ ] Look at extreme seeking control

- [x] Convert Ackerman to differential
#### Research Racing

#### PocketQube

#### Notes

**23/07/2024**

https://razorrcblog.blogspot.com/2015/09/center-differentials-explained.html#:~:text=With%20a%20center%20diff%2C%20as,able%20to%20spin%20more%20easily.

One of the most misunderstood tuning options for the Slash 4x4 is the center differential.  I’ve read a lot of posts on center differentials, and the majority say:  use a slipper clutch for bashing, and a center differential for racing.

I would agree with that statement, but why is that?  To understand why, you have to first understand what the two devices do and the differences between them.

Slipper Clutch

In a Slash 4x4, power is normally distributed equally front to rear, left to right.

50% of the power goes to the front, 50% to the rear.  And at each end there is another differential that allows the left and right wheels to turn at different rates.  When going straight, the left and right wheels will turn at the same speeds.  When turning, the outside wheel needs to turn faster than the inside wheel.  I think most people understand that.

What the slipper clutch does is allow the whole drivetrain (all the power in the system) to slip when necessary.  The tighter you make the slipper clutch, the harder it is to make the drivetrain slip.  The looser, the easier.  When does it slip?  When the motor is trying to turn at too much of a different rate than the wheels.  When you take those giant 20 foot jumps and land with the car going 20 mph and the motor pinned at 40mph, the slipper will slip instead of grenading your drivetrain.  This is a good thing and prevents parts from breaking.

You can also do some tuning for low traction conditions:  when you mash the throttle and the motor tries to turn at a ridiculous speed, a looser slipper will slip rather than instantaneously try to apply full power and spin the wheels.  This is often used in 2WD cars to provide a primitive form of traction control.

Center Differential

Now the center differential is more complicated, and nearly everything I read about it on Slash forums is wrong.  At its most basic, the center differential allows the front and rear wheels to rotate at different rates, much like the front/rear differentials allow the left and right wheels to rotate at different rates.

Why is this helpful?  This link has the best description I’ve seen, and I never see anyone explain this simple concept, even though it’s extremely important:

http://4x4abc.com/4WD101/abc4.html

Most people say “You need a center diff to handle better.  You need one for racing.  It drives better”.  Well OK, but why?  What does “handle better” even mean?  In what way does it “drive better”?

In a turn, the front wheels and rear wheels need to rotate at different speeds because each wheel is not following the same line in a turn!  The outside front wheel has to travel the furthest, and the inside rear wheel the shortest.  So to keep each wheel spinning at its correct rate, the front output shaft from the center diff needs to turn faster than the rear output shaft.

This is what the center diff does – it allows the front wheels to turn faster than the rears.  Or: in a turn, more power goes to the front and less to the rears.  If you lock down the center diff (super thick fluid, or use a locked down slipper), the front and rears have locked down output shafts and cannot spin at different rates.

A slipper clutch can’t produce the same effect – power is always equal front and rear, it only allows the whole system to slip, not individually front and rear.

This is why 4-wheel drive cars “handle better” with a center differential.  The wheels can follow their natural line more easily.  As a result, the car doesn’t push as much and will follow the line you’re pointing the front wheels at.

Center diff:  wheelie control

Another effect of a center differential occurs when only two wheels are on the ground.  With a tight slipper, you can easily wheelie with a powerful motor, because the front will lift (rear will squat).  The rear wheels will still get their normal % of power no matter what you do and will continue to drive the car forward (or upwards!).

With a center diff, as the front wheels rise and start to lose traction, it automatically starts transferring power to the end with less traction.  The rear wheels are stuck to the ground, but the fronts are in the air and able to spin more easily.  Since they can spin more easily, they do, and power will transfer to the wheelying front wheels and away from the rear.  This reduces overall motor power applied to the rear.  You can tune the anti-wheelying effect of the center diff by using thinner/thicker fluid. 

While big wheelies look cool, they usually aren’t the fastest way to accelerate.  By not wheelying, you may be able to accelerate faster!  Advanced race motorcycles usually have anti-wheelie control to accelerate the bike faster, and the same concept can be applied to RC cars.  It’s also easier to steer when the front wheels are on the ground…

Center diff: disadvantages

So we’ve talked about all of the great things about a center diff, what are the downsides?  Well, first, the device is much more complicated and prone to failure than a simple slipper clutch.  It’s also more work to maintain and tune and get right, since you have to remove it, drain it and refill fluid.  With a slipper, you just take a wrench, adjust it, and you’re on your way again in 10 seconds or less.

Another effect I found is that there are sometimes track features where you still want maximum power applied to the (rear) wheels when you only have 2 of the wheels on the ground (2 in the air).

At my local track, the current layout has a set of 3 small doubles that we call the rhythm section.  You basically have very small windows in which to jump the car, land it, and then immediately jump again.  And you have to do this 3 times in a row.

With the very small area in which to jump, land, and then jump again, it’s very difficult to land all 4 wheels at the same time perfectly.  If you don’t, however, when you hit the throttle to go off the next jump, power will be bled away from your (rear) drive wheels to the wheels in the air.  The overall effect is that you don’t get very good drive, and it’s difficult to generate enough momentum to make the next double.

With a slipper, this effect is negligible.  With a tight slipper, even if only the front wheels or the rear wheels land, you can still get very good forward drive (just like you can when wheelying) to accelerate the car and make the next jump.  I actually convinced my friend Alex to put a slipper clutch in his race Slash 4x4, just to make this section easier to do, and he found the results profoundly better.

In a 2WD car, the rhythm section is also fairly easy because you always get full power applied to the drive wheels to help you accelerate for the next double.  Even expert 4x4 short course drivers (using a center diff) have a difficult time making the series of jumps, while it’s fairly simple in a 2WD short course truck (my TLR 22 SCT, for example).

The final disadvantage of a center diff is that it does not protect the drivetrain as well as a slipper clutch.  When you land all 4 wheels at the wrong speed (relative to the motor RPM), there is nothing to slip and bleed power off.  The best it can do is bleed power off to a wheel that has less traction, but this isn’t always possible.  Overall the drivetrain will take more of a beating.

Conclusion

I hope you learned a few things about slipper clutches and center diffs and how they work.  It took me some serious thinking and research to figure out exactly why a center diff was better (and sometimes worse) for racing, and I hope I’ve shared that knowledge with you.

CHATGPT: (26/07/2024)

You can create a function that relates skid steer (differential steering) to Ackermann steering in terms of turning radius. Both types of steering have different mechanisms for turning, but they can be mathematically related by focusing on the turning radius.

### Key Concepts

1. **Ackermann Steering**:
    
    - This involves turning the front wheels at different angles to achieve a specific turning radius. The steering angle $\theta$ is related to the turning radius $R$ by the wheelbase $L$ (distance between the front and rear axles) and the speed of the vehicle.
2. **Skid Steer (Differential Steering)**:
    
    - In this type of steering, the left and right wheels are driven at different speeds. The difference in speed between the left and right wheels creates a turning radius $R$. The turning radius is influenced by the width of the vehicle $W$ (distance between the left and right wheels) and the speed difference.

### Mathematical Relationship

For a vehicle using Ackermann steering, the turning radius $R$ can be expressed as:

$R = \frac{L}{\tan(\theta)}$

Where:

- $L$ is the wheelbase.
- $\theta$ is the steering angle of the front wheels.

For a skid steer vehicle, the turning radius $R$ can be expressed as:

$R=\frac{W}{2}×\frac{v_{\text{left}}+v_{\text{right}}}{v_{\text{left}}−v_{\text{right}}}$

Where:

- $W$ is the width of the vehicle.
- $v_{\text{left}}$ and $v_{\text{right}}$ are the speeds of the left and right wheels, respectively.

### Function to Relate Ackermann Steering Angle to Skid Steer Speed Difference

To relate the steering angle $\theta$ in an Ackermann steering system to the wheel speeds in a skid steer system for the same turning radius $R$, you can set the two expressions for $R$ equal to each other and solve for the desired variables.

Given:
$R=\frac{L}{\tan⁡(\theta)}=\frac{W}{2}×\frac{v_{\text{left}}+v_{\text{right}}}{v_{\text{left}}−v_{\text{right}}}$

### Solving for $v_{\text{left}}$ and $v_{\text{right}}$

Rearrange the equation to isolate $v_{\text{left}}$ and $v_{\text{right}}$​. For simplicity, let's introduce a variable $k$ where:

$k = \frac{L}{W} \tan(\theta)$

Thus the equation becomes:

$2k = \frac{v_{\text{left}} + v_{\text{right}}}{v_{\text{left}} - v_{\text{right}}}$

Multiply both sides by ($v_{\text{left}} - v_{\text{right}}$) to get:

$2k(v_{\text{left}} - v_{\text{right}}) = v_{\text{left}} + v_{\text{right}}$

Distribute and rearrange to find $v_{\text{left}}$ and $v_{\text{right}}$:

$2k(v_{\text{left}} - v_{\text{right}}) = v_{\text{left}} + v_{\text{right}}$

$(2k - 1)v_{\text{left}} = (2k + 1)v_{\text{right}}$

Now, solve for $v_{\text{left}}$ and $v_{\text{right}}$​:

$v_{\text{left}} = \frac{(2k + 1)}{(2k - 1)}v_{\text{right}}$​

Thus, if $v_{\text{right}}$ is known or chosen, $v_{\text{left}}$​ can be calculated, and vice versa. The ratio between $v_{\text{left}}$ and $v_{\text{right}}$​ determines the turning radius equivalent to the steering angle $\theta$ in an Ackermann system.